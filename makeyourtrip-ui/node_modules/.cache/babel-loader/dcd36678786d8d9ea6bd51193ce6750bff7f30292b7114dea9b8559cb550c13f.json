{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) : typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ImageKitReact = {}, global.React));\n})(this, function (exports, React) {\n  'use strict';\n\n  function _interopDefaultLegacy(e) {\n    return e && typeof e === 'object' && 'default' in e ? e : {\n      'default': e\n    };\n  }\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n    return _typeof(obj);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n    return keys;\n  }\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n    return target;\n  }\n  var version = \"1.5.4\";\n  var errorMessages = {\n    MANDATORY_INITIALIZATION_MISSING: {\n      message: \"Missing urlEndpoint during SDK initialization\",\n      help: \"\"\n    },\n    INVALID_TRANSFORMATION_POSITION: {\n      message: \"Invalid transformationPosition parameter\",\n      help: \"\"\n    },\n    PRIVATE_KEY_CLIENT_SIDE: {\n      message: \"privateKey should not be passed on the client side\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_DATA: {\n      message: \"Missing data for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILE_PARAMETER: {\n      message: \"Missing file parameter for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILENAME_PARAMETER: {\n      message: \"Missing fileName parameter for upload\",\n      help: \"\"\n    },\n    MISSING_AUTHENTICATION_ENDPOINT: {\n      message: \"Missing authentication endpoint for upload\",\n      help: \"\"\n    },\n    MISSING_PUBLIC_KEY: {\n      message: \"Missing public key for upload\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_TIMEOUT: {\n      message: \"The authenticationEndpoint you provided timed out in 60 seconds\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to authenticationEndpoint failed due to network error\",\n      help: \"\"\n    },\n    AUTH_INVALID_RESPONSE: {\n      message: \"Invalid response from authenticationEndpoint. The SDK expects a JSON response with three fields i.e. signature, token and expire.\",\n      help: \"\"\n    },\n    UPLOAD_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to ImageKit upload endpoint failed due to network error\",\n      help: \"\"\n    },\n    INVALID_UPLOAD_OPTIONS: {\n      message: \"Invalid uploadOptions parameter\",\n      help: \"\"\n    }\n  };\n  function respond(isError, response, callback) {\n    if (typeof callback == \"function\") {\n      if (isError) {\n        callback(response, null);\n      } else {\n        callback(null, response);\n      }\n    }\n  }\n  function getResponseHeaderMap(xhr) {\n    var headers = {};\n    var responseHeaders = xhr.getAllResponseHeaders();\n    if (Object.keys(responseHeaders).length) {\n      responseHeaders.trim().split(/[\\r\\n]+/).map(function (value) {\n        return value.split(/: /);\n      }).forEach(function (keyValue) {\n        headers[keyValue[0].trim()] = keyValue[1].trim();\n      });\n    }\n    return headers;\n  }\n  var addResponseHeadersAndBody = function addResponseHeadersAndBody(body, xhr) {\n    var response = _objectSpread2({}, body);\n    var responseMetadata = {\n      statusCode: xhr.status,\n      headers: getResponseHeaderMap(xhr)\n    };\n    Object.defineProperty(response, \"$ResponseMetadata\", {\n      value: responseMetadata,\n      enumerable: false,\n      writable: false\n    });\n    return response;\n  };\n  var request = function request(uploadFileXHR, formData, options, callback) {\n    generateSignatureToken(options.authenticationEndpoint).then(function (signaturObj) {\n      formData.append(\"signature\", signaturObj.signature);\n      formData.append(\"expire\", String(signaturObj.expire));\n      formData.append(\"token\", signaturObj.token);\n      uploadFile(uploadFileXHR, formData).then(function (result) {\n        return respond(false, result, callback);\n      }, function (ex) {\n        return respond(true, ex, callback);\n      });\n    }, function (ex) {\n      return respond(true, ex, callback);\n    });\n  };\n  var generateSignatureToken = function generateSignatureToken(authenticationEndpoint) {\n    return new Promise(function (resolve, reject) {\n      var xhr = new XMLHttpRequest();\n      xhr.timeout = 60000;\n      var urlObj = new URL(authenticationEndpoint);\n      urlObj.searchParams.set(\"t\", Math.random().toString());\n      xhr.open('GET', urlObj.toString());\n      xhr.ontimeout = function (e) {\n        return reject(errorMessages.AUTH_ENDPOINT_TIMEOUT);\n      };\n      xhr.onerror = function () {\n        return reject(errorMessages.AUTH_ENDPOINT_NETWORK_ERROR);\n      };\n      xhr.onload = function () {\n        if (xhr.status === 200) {\n          try {\n            var body = JSON.parse(xhr.responseText);\n            var obj = {\n              signature: body.signature,\n              expire: body.expire,\n              token: body.token\n            };\n            if (!obj.signature || !obj.expire || !obj.token) {\n              return reject(errorMessages.AUTH_INVALID_RESPONSE);\n            }\n            return resolve(obj);\n          } catch (ex) {\n            return reject(errorMessages.AUTH_INVALID_RESPONSE);\n          }\n        } else {\n          return reject(errorMessages.AUTH_INVALID_RESPONSE);\n        }\n      };\n      xhr.send();\n    });\n  };\n  var uploadFile = function uploadFile(uploadFileXHR, formData) {\n    return new Promise(function (resolve, reject) {\n      uploadFileXHR.open('POST', 'https://upload.imagekit.io/api/v1/files/upload');\n      uploadFileXHR.onerror = function (e) {\n        return reject(errorMessages.UPLOAD_ENDPOINT_NETWORK_ERROR);\n      };\n      uploadFileXHR.onload = function () {\n        if (uploadFileXHR.status === 200) {\n          try {\n            var body = JSON.parse(uploadFileXHR.responseText);\n            var uploadResponse = addResponseHeadersAndBody(body, uploadFileXHR);\n            return resolve(uploadResponse);\n          } catch (ex) {\n            return reject(ex);\n          }\n        } else {\n          try {\n            var body = JSON.parse(uploadFileXHR.responseText);\n            var uploadError = addResponseHeadersAndBody(body, uploadFileXHR);\n            return reject(uploadError);\n          } catch (ex) {\n            return reject(ex);\n          }\n        }\n      };\n      uploadFileXHR.send(formData);\n    });\n  };\n  var upload = function upload(xhr, uploadOptions, options, callback) {\n    if (!uploadOptions.file) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILE_PARAMETER, callback);\n      return;\n    }\n    if (!uploadOptions.fileName) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILENAME_PARAMETER, callback);\n      return;\n    }\n    if (!options.authenticationEndpoint) {\n      respond(true, errorMessages.MISSING_AUTHENTICATION_ENDPOINT, callback);\n      return;\n    }\n    if (!options.publicKey) {\n      respond(true, errorMessages.MISSING_PUBLIC_KEY, callback);\n      return;\n    }\n    var formData = new FormData();\n    var key;\n    for (key in uploadOptions) {\n      if (key) {\n        if (key === \"file\" && typeof uploadOptions.file != \"string\") {\n          formData.append('file', uploadOptions.file, String(uploadOptions.fileName));\n        } else if (key === \"tags\" && Array.isArray(uploadOptions.tags)) {\n          formData.append('tags', uploadOptions.tags.join(\",\"));\n        } else if (key === \"responseFields\" && Array.isArray(uploadOptions.responseFields)) {\n          formData.append('responseFields', uploadOptions.responseFields.join(\",\"));\n        } else if (key === \"extensions\" && Array.isArray(uploadOptions.extensions)) {\n          formData.append('extensions', JSON.stringify(uploadOptions.extensions));\n        } else if (key === \"customMetadata\" && _typeof(uploadOptions.customMetadata) === \"object\" && !Array.isArray(uploadOptions.customMetadata) && uploadOptions.customMetadata !== null) {\n          formData.append('customMetadata', JSON.stringify(uploadOptions.customMetadata));\n        } else if (uploadOptions[key] !== undefined) {\n          formData.append(key, String(uploadOptions[key]));\n        }\n      }\n    }\n    formData.append(\"publicKey\", options.publicKey);\n    request(xhr, formData, _objectSpread2(_objectSpread2({}, options), {}, {\n      authenticationEndpoint: options.authenticationEndpoint\n    }), callback);\n  };\n  var supportedTransforms = {\n    width: \"w\",\n    height: \"h\",\n    aspectRatio: \"ar\",\n    quality: \"q\",\n    crop: \"c\",\n    cropMode: \"cm\",\n    focus: \"fo\",\n    x: \"x\",\n    y: \"y\",\n    format: \"f\",\n    radius: \"r\",\n    background: \"bg\",\n    border: \"b\",\n    rotation: \"rt\",\n    rotate: \"rt\",\n    blur: \"bl\",\n    named: \"n\",\n    overlayImage: \"oi\",\n    overlayImageAspectRatio: \"oiar\",\n    overlayImageBackground: \"oibg\",\n    overlayImageBorder: \"oib\",\n    overlayImageDPR: \"oidpr\",\n    overlayImageQuality: \"oiq\",\n    overlayImageCropping: \"oic\",\n    overlayImageTrim: \"oit\",\n    overlayX: \"ox\",\n    overlayY: \"oy\",\n    overlayFocus: \"ofo\",\n    overlayHeight: \"oh\",\n    overlayWidth: \"ow\",\n    overlayText: \"ot\",\n    overlayTextFontSize: \"ots\",\n    overlayTextFontFamily: \"otf\",\n    overlayTextColor: \"otc\",\n    overlayTextTransparency: \"oa\",\n    overlayAlpha: \"oa\",\n    overlayTextTypography: \"ott\",\n    overlayBackground: \"obg\",\n    overlayTextEncoded: \"ote\",\n    overlayTextWidth: \"otw\",\n    overlayTextBackground: \"otbg\",\n    overlayTextPadding: \"otp\",\n    overlayTextInnerAlignment: \"otia\",\n    overlayRadius: \"or\",\n    progressive: \"pr\",\n    lossless: \"lo\",\n    trim: \"t\",\n    metadata: \"md\",\n    colorProfile: \"cp\",\n    defaultImage: \"di\",\n    dpr: \"dpr\",\n    effectSharpen: \"e-sharpen\",\n    effectUSM: \"e-usm\",\n    effectContrast: \"e-contrast\",\n    effectGray: \"e-grayscale\",\n    original: \"orig\",\n    raw: \"raw\"\n  };\n  var DEFAULT_TRANSFORMATION_POSITION = \"path\";\n  var QUERY_TRANSFORMATION_POSITION = \"query\";\n  var VALID_TRANSFORMATION_POSITIONS = [DEFAULT_TRANSFORMATION_POSITION, QUERY_TRANSFORMATION_POSITION];\n  var CHAIN_TRANSFORM_DELIMITER = \":\";\n  var TRANSFORM_DELIMITER = \",\";\n  var TRANSFORM_KEY_VALUE_DELIMITER = \"-\";\n  var transformationUtils = {\n    getDefault: function getDefault() {\n      return DEFAULT_TRANSFORMATION_POSITION;\n    },\n    addAsQueryParameter: function addAsQueryParameter(options) {\n      return options.transformationPosition === QUERY_TRANSFORMATION_POSITION;\n    },\n    validParameters: function validParameters(options) {\n      if (typeof options.transformationPosition == \"undefined\") return false;\n      return VALID_TRANSFORMATION_POSITIONS.indexOf(options.transformationPosition) != -1;\n    },\n    getTransformKey: function getTransformKey(transform) {\n      if (!transform) {\n        return \"\";\n      }\n      return supportedTransforms[transform] || supportedTransforms[transform.toLowerCase()] || \"\";\n    },\n    getChainTransformDelimiter: function getChainTransformDelimiter() {\n      return CHAIN_TRANSFORM_DELIMITER;\n    },\n    getTransformDelimiter: function getTransformDelimiter() {\n      return TRANSFORM_DELIMITER;\n    },\n    getTransformKeyValueDelimiter: function getTransformKeyValueDelimiter() {\n      return TRANSFORM_KEY_VALUE_DELIMITER;\n    }\n  };\n  var TRANSFORMATION_PARAMETER = \"tr\";\n  function removeTrailingSlash(str) {\n    if (typeof str == \"string\" && str[str.length - 1] == \"/\") {\n      str = str.substring(0, str.length - 1);\n    }\n    return str;\n  }\n  function removeLeadingSlash(str) {\n    if (typeof str == \"string\" && str[0] == \"/\") {\n      str = str.slice(1);\n    }\n    return str;\n  }\n  function pathJoin(parts, sep) {\n    var separator = sep || \"/\";\n    var replace = new RegExp(separator + \"{1,}\", \"g\");\n    return parts.join(separator).replace(replace, separator);\n  }\n  var buildURL = function buildURL(opts) {\n    if (!opts.path && !opts.src) {\n      return \"\";\n    }\n    var urlObj, isSrcParameterUsedForURL, urlEndpointPattern;\n    try {\n      if (opts.path) {\n        urlEndpointPattern = new URL(opts.urlEndpoint).pathname;\n        urlObj = new URL(pathJoin([opts.urlEndpoint.replace(urlEndpointPattern, \"\"), opts.path]));\n      } else {\n        urlObj = new URL(opts.src);\n        isSrcParameterUsedForURL = true;\n      }\n    } catch (e) {\n      console.error(e);\n      return \"\";\n    }\n    for (var i in opts.queryParameters) {\n      urlObj.searchParams.append(i, String(opts.queryParameters[i]));\n    }\n    var transformationString = constructTransformationString(opts.transformation);\n    if (transformationString && transformationString.length) {\n      if (transformationUtils.addAsQueryParameter(opts) || isSrcParameterUsedForURL) {\n        urlObj.searchParams.append(TRANSFORMATION_PARAMETER, transformationString);\n      } else {\n        urlObj.pathname = pathJoin([TRANSFORMATION_PARAMETER + transformationUtils.getChainTransformDelimiter() + transformationString, urlObj.pathname]);\n      }\n    }\n    if (urlEndpointPattern) {\n      urlObj.pathname = pathJoin([urlEndpointPattern, urlObj.pathname]);\n    } else {\n      urlObj.pathname = pathJoin([urlObj.pathname]);\n    }\n    return urlObj.href;\n  };\n  function constructTransformationString(transformation) {\n    if (!Array.isArray(transformation)) {\n      return \"\";\n    }\n    var parsedTransforms = [];\n    for (var i = 0, l = transformation.length; i < l; i++) {\n      var parsedTransformStep = [];\n      for (var key in transformation[i]) {\n        var transformKey = transformationUtils.getTransformKey(key);\n        if (!transformKey) {\n          transformKey = key;\n        }\n        if (transformation[i][key] === \"-\") {\n          parsedTransformStep.push(transformKey);\n        } else if (key === \"raw\") {\n          parsedTransformStep.push(transformation[i][key]);\n        } else {\n          var value = transformation[i][key];\n          if (transformKey === \"oi\" || transformKey === \"di\") {\n            value = removeTrailingSlash(removeLeadingSlash(value || \"\"));\n            value = value.replace(/\\//g, \"@@\");\n          }\n          parsedTransformStep.push([transformKey, value].join(transformationUtils.getTransformKeyValueDelimiter()));\n        }\n      }\n      parsedTransforms.push(parsedTransformStep.join(transformationUtils.getTransformDelimiter()));\n    }\n    return parsedTransforms.join(transformationUtils.getChainTransformDelimiter());\n  }\n  var url = function url(urlOpts, defaultOptions) {\n    return buildURL(_objectSpread2(_objectSpread2({}, defaultOptions), urlOpts));\n  };\n  function mandatoryParametersAvailable(options) {\n    return options.urlEndpoint;\n  }\n  var promisify = function promisify(thisContext, fn) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      if (args.length === fn.length && typeof args[args.length - 1] !== \"undefined\") {\n        if (typeof args[args.length - 1] !== \"function\") {\n          throw new Error(\"Callback must be a function.\");\n        }\n        fn.call.apply(fn, [thisContext].concat(args));\n      } else {\n        return new Promise(function (resolve, reject) {\n          var callback = function callback(err) {\n            if (err) {\n              return reject(err);\n            } else {\n              for (var _len2 = arguments.length, results = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                results[_key2 - 1] = arguments[_key2];\n              }\n              resolve(results.length > 1 ? results : results[0]);\n            }\n          };\n          args.pop();\n          args.push(callback);\n          fn.call.apply(fn, [thisContext].concat(args));\n        });\n      }\n    };\n  };\n  var ImageKit = function () {\n    function ImageKit(opts) {\n      _classCallCheck(this, ImageKit);\n      _defineProperty(this, \"options\", {\n        sdkVersion: \"javascript-\".concat(version),\n        publicKey: \"\",\n        urlEndpoint: \"\",\n        transformationPosition: transformationUtils.getDefault()\n      });\n      this.options = _objectSpread2(_objectSpread2({}, this.options), opts || {});\n      if (!mandatoryParametersAvailable(this.options)) {\n        throw errorMessages.MANDATORY_INITIALIZATION_MISSING;\n      }\n      if (!transformationUtils.validParameters(this.options)) {\n        throw errorMessages.INVALID_TRANSFORMATION_POSITION;\n      }\n    }\n    _createClass(ImageKit, [{\n      key: \"url\",\n      value: function url$1(urlOptions) {\n        return url(urlOptions, this.options);\n      }\n    }, {\n      key: \"upload\",\n      value: function upload$1(uploadOptions, callbackOrOptions, options) {\n        var callback;\n        if (typeof callbackOrOptions === 'function') {\n          callback = callbackOrOptions;\n        } else {\n          options = callbackOrOptions || {};\n        }\n        if (!uploadOptions || _typeof(uploadOptions) !== \"object\") {\n          return respond(true, errorMessages.INVALID_UPLOAD_OPTIONS, callback);\n        }\n        var mergedOptions = _objectSpread2(_objectSpread2({}, this.options), options);\n        var _ref = uploadOptions || {},\n          userProvidedXHR = _ref.xhr;\n        delete uploadOptions.xhr;\n        var xhr = userProvidedXHR || new XMLHttpRequest();\n        return promisify(this, upload)(xhr, uploadOptions, mergedOptions, callback);\n      }\n    }]);\n    return ImageKit;\n  }();\n  function _classCallCheck$1(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties$1(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  function _createClass$1(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties$1(Constructor, staticProps);\n    return Constructor;\n  }\n  function _defineProperty$1(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n      return target;\n    };\n    return _extends.apply(this, arguments);\n  }\n  function ownKeys$1(object, enumerableOnly) {\n    var keys = Object.keys(object);\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n    return keys;\n  }\n  function _objectSpread2$1(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      if (i % 2) {\n        ownKeys$1(Object(source), true).forEach(function (key) {\n          _defineProperty$1(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys$1(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n    return target;\n  }\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n    return _setPrototypeOf(o, p);\n  }\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n    return target;\n  }\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n    var key, i;\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n    return target;\n  }\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n    return self;\n  }\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n    return _assertThisInitialized(self);\n  }\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n        result;\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var ImageKitContextType = /*#__PURE__*/React.createContext(null);\n  var ImageKitComponent = /*#__PURE__*/function (_PureComponent) {\n    _inherits(ImageKitComponent, _PureComponent);\n    var _super = _createSuper(ImageKitComponent);\n    function ImageKitComponent(props, context) {\n      var _this;\n      _classCallCheck$1(this, ImageKitComponent);\n      _this = _super.call(this, props, context);\n      _this.getContext = _this.getContext.bind(_assertThisInitialized(_this));\n      return _this;\n    }\n    _createClass$1(ImageKitComponent, [{\n      key: \"getContext\",\n      value: function getContext() {\n        return this.context || {};\n      }\n    }, {\n      key: \"getIKClient\",\n      value: function getIKClient() {\n        var contextOptions = this.getContext();\n        if (contextOptions.ikClient) {\n          return contextOptions.ikClient;\n        }\n        var urlEndpoint = this.props.urlEndpoint;\n        urlEndpoint = urlEndpoint || contextOptions.urlEndpoint;\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          throw new Error(\"Missing urlEndpoint during initialization\");\n        }\n        var ikClient = new ImageKit({\n          urlEndpoint: urlEndpoint,\n          // @ts-ignore\n          sdkVersion: \"\"\n        });\n        return ikClient;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return null;\n      }\n    }]);\n    return ImageKitComponent;\n  }(React.PureComponent);\n  ImageKitComponent.contextType = ImageKitContextType;\n  function createCommonjsModule(fn, basedir, module) {\n    return module = {\n      path: basedir,\n      exports: {},\n      require: function (path, base) {\n        return commonjsRequire(path, base === undefined || base === null ? module.path : base);\n      }\n    }, fn(module, module.exports), module.exports;\n  }\n  function commonjsRequire() {\n    throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n  function emptyFunction() {}\n  function emptyFunctionWithReset() {}\n  emptyFunctionWithReset.resetWarningCache = emptyFunction;\n  var factoryWithThrowingShims = function () {\n    function shim(props, propName, componentName, location, propFullName, secret) {\n      if (secret === ReactPropTypesSecret_1) {\n        // It is still safe when called from React.\n        return;\n      }\n      var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n      err.name = 'Invariant Violation';\n      throw err;\n    }\n    shim.isRequired = shim;\n    function getShim() {\n      return shim;\n    }\n    // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      elementType: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim,\n      checkPropTypes: emptyFunctionWithReset,\n      resetWarningCache: emptyFunction\n    };\n    ReactPropTypes.PropTypes = ReactPropTypes;\n    return ReactPropTypes;\n  };\n  var propTypes = createCommonjsModule(function (module) {\n    /**\n     * Copyright (c) 2013-present, Facebook, Inc.\n     *\n     * This source code is licensed under the MIT license found in the\n     * LICENSE file in the root directory of this source tree.\n     */\n    {\n      // By explicitly using `prop-types` you are opting into new production behavior.\n      // http://fb.me/prop-types-in-prod\n      module.exports = factoryWithThrowingShims();\n    }\n  });\n  var Props = {\n    loading: propTypes.oneOf(['lazy']),\n    lqip: propTypes.shape({\n      active: propTypes.bool,\n      quality: propTypes.number,\n      threshold: propTypes.number,\n      blur: propTypes.number,\n      raw: propTypes.string\n    }),\n    path: propTypes.string,\n    src: propTypes.string,\n    queryParameters: propTypes.objectOf(propTypes.oneOfType([propTypes.string, propTypes.number]).isRequired),\n    transformation: propTypes.arrayOf(propTypes.object.isRequired),\n    transformationPosition: propTypes.oneOf(['path', 'query'])\n  };\n  var Props$1 = {\n    fileName: propTypes.string,\n    tags: propTypes.arrayOf(propTypes.string.isRequired),\n    useUniqueFileName: propTypes.bool,\n    responseFields: propTypes.array,\n    isPrivateFile: propTypes.bool,\n    folder: propTypes.string,\n    customCoordinates: propTypes.string,\n    extensions: propTypes.arrayOf(propTypes.object.isRequired),\n    webhookUrl: propTypes.string,\n    overwriteFile: propTypes.bool,\n    overwriteAITags: propTypes.bool,\n    overwriteTags: propTypes.bool,\n    overwriteCustomMetadata: propTypes.bool,\n    customMetadata: propTypes.any,\n    onError: propTypes.func,\n    onSuccess: propTypes.func,\n    onUploadStart: propTypes.func,\n    onUploadProgress: propTypes.func,\n    inputRef: propTypes.object,\n    validateFile: propTypes.func\n  };\n  var Props$2 = {\n    publicKey: propTypes.string,\n    urlEndpoint: propTypes.string,\n    authenticationEndpoint: propTypes.string\n  };\n  var IKContextCombinedProps = _objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({}, Props$2), Props), Props$1), Props$1), {}, {\n    ikClient: propTypes.instanceOf(ImageKit)\n  });\n\n  /**\n   * Provides a container for ImageKit components. Any option set in IKContext will be passed to the children.\n   *\n   * @example\n   *<IKContext  publicKey=\"<public key>\" urlEndpoint=\"url link\">\n   *    <!-- other tags -->\n   *    <Image src={link}/>\n   *</IKContext>\n   */\n\n  var IKContext = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKContext, _ImageKitComponent);\n    var _super = _createSuper(IKContext);\n    function IKContext() {\n      _classCallCheck$1(this, IKContext);\n      return _super.apply(this, arguments);\n    }\n    _createClass$1(IKContext, [{\n      key: \"extractContextOptions\",\n      value: function extractContextOptions(mergedOptions) {\n        var result = {};\n        var propKeys = Object.keys(IKContextCombinedProps);\n        for (var i = 0; i < propKeys.length; i++) {\n          var key = propKeys[i];\n          var value = mergedOptions[key];\n          if (value) {\n            result[key] = value;\n          }\n        }\n        return result;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var children = this.props.children;\n        var mergedOptions = _objectSpread2$1(_objectSpread2$1({}, this.getContext()), this.props);\n        var contextOptions = this.extractContextOptions(mergedOptions);\n        if (contextOptions.urlEndpoint && contextOptions.urlEndpoint.trim() !== \"\") {\n          contextOptions.ikClient = new ImageKit({\n            urlEndpoint: contextOptions.urlEndpoint,\n            // @ts-ignore\n            sdkVersion: \"\"\n          });\n        }\n        return /*#__PURE__*/React__default['default'].createElement(ImageKitContextType.Provider, {\n          value: contextOptions\n        }, children);\n      }\n    }]);\n    return IKContext;\n  }(ImageKitComponent);\n  IKContext.propTypes = IKContextCombinedProps;\n  var COMBINED_IMAGE_PROP_TYPES = _objectSpread2$1(_objectSpread2$1({}, Props$2), Props);\n  var fetchEffectiveConnection = function fetchEffectiveConnection() {\n    try {\n      return navigator.connection.effectiveType;\n    } catch (ex) {\n      return \"4g\";\n    }\n  };\n  var areObjectsDifferent = function areObjectsDifferent(prevProps, newProps, propsAffectingURL) {\n    for (var index = 0; index < propsAffectingURL.length; index++) {\n      if (prevProps[propsAffectingURL[index]] !== newProps[propsAffectingURL[index]]) {\n        return true;\n      }\n    }\n    return false;\n  };\n  var getSrc = function getSrc(_ref, ikClient, contextOptions) {\n    var urlEndpoint = _ref.urlEndpoint,\n      lqip = _ref.lqip,\n      src = _ref.src,\n      path = _ref.path,\n      transformation = _ref.transformation,\n      transformationPosition = _ref.transformationPosition,\n      queryParameters = _ref.queryParameters;\n    // @ts-ignore\n    var options = {\n      urlEndpoint: urlEndpoint || contextOptions.urlEndpoint,\n      src: src || contextOptions.src || undefined,\n      path: path || contextOptions.path || undefined,\n      transformation: transformation || contextOptions.transformation,\n      transformationPosition: transformationPosition || contextOptions.transformationPosition || undefined,\n      queryParameters: queryParameters || contextOptions.queryParameters || {}\n    };\n    var result = {\n      originalSrc: ikClient.url(options)\n    };\n    if (lqip && lqip.active) {\n      var quality = Math.round(lqip.quality || lqip.threshold || 20);\n      var blur = Math.round(lqip.blur || 6);\n      var newTransformation = options.transformation ? _toConsumableArray(options.transformation) : [];\n      if (lqip.raw && typeof lqip.raw === \"string\" && lqip.raw.trim() != \"\") {\n        newTransformation.push({\n          raw: lqip.raw.trim()\n        });\n      } else {\n        newTransformation.push({\n          quality: String(quality),\n          blur: String(blur)\n        });\n      }\n      result.lqipSrc = ikClient.url(_objectSpread2$1(_objectSpread2$1({}, options), {}, {\n        transformation: newTransformation\n      }));\n    }\n    return result;\n  };\n  var getIKElementsUrl = function getIKElementsUrl(_ref2, _ref3) {\n    var _ref2$lqip = _ref2.lqip,\n      lqip = _ref2$lqip === void 0 ? null : _ref2$lqip,\n      loading = _ref2.loading;\n    var intersected = _ref3.intersected,\n      originalSrcLoaded = _ref3.originalSrcLoaded,\n      originalSrc = _ref3.originalSrc,\n      lqipSrc = _ref3.lqipSrc;\n\n    /*\n      No lazy loading no lqip\n        src=originalImage\n      No lazy loading lqip\n        src=lqip\n        src=originalImage (when loaded)\n      lazy loading and no lqip\n        src=''\n        onIntersect:\n        src=originalImage\n      lazy loading and lqip\n        src=lqip\n        onIntersect:\n        src=originalImage (when loaded)\n    */\n    var isLqipActive = function isLqipActive(lqip) {\n      return lqip && lqip.active;\n    };\n    if (loading !== \"lazy\" && !isLqipActive(lqip)) {\n      return originalSrc;\n    } else if (loading !== \"lazy\" && isLqipActive(lqip)) {\n      if (originalSrcLoaded) {\n        return originalSrc;\n      } else {\n        return lqipSrc;\n      }\n    } else if (loading === \"lazy\" && !isLqipActive(lqip)) {\n      if (intersected) {\n        return originalSrc;\n      } else {\n        return \"\";\n      }\n    } else {\n      //  if (loading === \"lazy\" && isLqipActive(lqip))\n      if (intersected && originalSrcLoaded) {\n        return originalSrc;\n      } else {\n        return lqipSrc;\n      }\n    }\n  };\n  var propsAffectingURL = [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"];\n  var IKImage = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKImage, _ImageKitComponent);\n    var _super = _createSuper(IKImage);\n    function IKImage(props, context) {\n      var _this;\n      _classCallCheck$1(this, IKImage);\n      _this = _super.call(this, props, context);\n      _this.imageRef = /*#__PURE__*/React__default['default'].createRef();\n      var _getSrc = getSrc(_this.props, _this.getIKClient(), _this.getContext()),\n        originalSrc = _getSrc.originalSrc,\n        lqipSrc = _getSrc.lqipSrc;\n      _this.state = {\n        currentUrl: undefined,\n        originalSrc: originalSrc,\n        lqipSrc: lqipSrc,\n        originalSrcLoaded: false,\n        intersected: false,\n        contextOptions: {}\n      };\n      return _this;\n    }\n    _createClass$1(IKImage, [{\n      key: \"updateImageUrl\",\n      value: function updateImageUrl() {\n        var url = getIKElementsUrl(this.props, this.state);\n        this.setState({\n          currentUrl: url\n        });\n      }\n    }, {\n      key: \"triggerOriginalImageLoad\",\n      value: function triggerOriginalImageLoad() {\n        var _this2 = this;\n        var img = new Image();\n        img.onload = function () {\n          _this2.setState({\n            originalSrcLoaded: true\n          }, function () {\n            _this2.updateImageUrl();\n          });\n        };\n        img.src = this.state.originalSrc;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this3 = this;\n        this.updateImageUrl();\n        this.setState({\n          contextOptions: this.getContext()\n        });\n        var image = this.imageRef.current;\n        var _this$props = this.props,\n          lqip = _this$props.lqip,\n          loading = _this$props.loading;\n        if (window && 'IntersectionObserver' in window && loading === \"lazy\") {\n          var connectionType = fetchEffectiveConnection(); // Values based on native lazy loading in Chrome - https://web.dev/native-lazy-loading/#improved-data-savings-and-distance-from-viewport-thresholds\n\n          var rootMargin = \"1250px\";\n          if (connectionType !== \"4g\") rootMargin = \"2500px\";\n          var imageObserver = new IntersectionObserver(function (entries) {\n            var el = entries[0];\n            if (el && el.isIntersecting) {\n              _this3.setState({\n                intersected: true\n              }, function () {\n                if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n                imageObserver.disconnect();\n                _this3.updateImageUrl();\n              });\n            }\n          }, {\n            rootMargin: \"\".concat(rootMargin, \" 0px \").concat(rootMargin, \" 0px\")\n          });\n          imageObserver.observe(image);\n          this.setState({\n            observe: imageObserver\n          });\n        } else {\n          // Load original image right away\n          this.setState({\n            intersected: true\n          }, function () {\n            if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n            _this3.updateImageUrl();\n          });\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var observe = this.state.observe;\n        if (observe) observe.disconnect();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        var _this4 = this;\n        var contextOptions = this.getContext();\n        if (areObjectsDifferent(prevProps, this.props, propsAffectingURL) || areObjectsDifferent(prevState.contextOptions, contextOptions, propsAffectingURL)) {\n          var _getSrc2 = getSrc(this.props, this.getIKClient(), this.getContext()),\n            originalSrc = _getSrc2.originalSrc,\n            lqipSrc = _getSrc2.lqipSrc;\n          this.setState({\n            originalSrc: originalSrc,\n            lqipSrc: lqipSrc\n          }, function () {\n            _this4.updateImageUrl();\n            _this4.setState({\n              contextOptions: _this4.getContext()\n            });\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var currentUrl = this.state.currentUrl;\n        var _this$props2 = this.props,\n          urlEndpoint = _this$props2.urlEndpoint,\n          loading = _this$props2.loading,\n          lqip = _this$props2.lqip,\n          path = _this$props2.path,\n          src = _this$props2.src,\n          transformation = _this$props2.transformation,\n          transformationPosition = _this$props2.transformationPosition,\n          queryParameters = _this$props2.queryParameters,\n          restProps = _objectWithoutProperties(_this$props2, [\"urlEndpoint\", \"loading\", \"lqip\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"]);\n        return /*#__PURE__*/React__default['default'].createElement(\"img\", _extends({\n          alt: this.props.alt || \"\",\n          src: currentUrl,\n          ref: this.imageRef\n        }, restProps));\n      }\n    }]);\n    return IKImage;\n  }(ImageKitComponent);\n  IKImage.propTypes = COMBINED_IMAGE_PROP_TYPES;\n  var Props$3 = {\n    path: propTypes.string,\n    src: propTypes.string,\n    queryParameters: propTypes.objectOf(propTypes.oneOfType([propTypes.string, propTypes.number]).isRequired),\n    transformation: propTypes.arrayOf(propTypes.object.isRequired),\n    transformationPosition: propTypes.oneOf(['path', 'query'])\n  };\n  var COMBINED_IMAGE_PROP_TYPES$1 = _objectSpread2$1(_objectSpread2$1({}, Props$2), Props$3);\n  var propsAffectingURL$1 = [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"];\n  var IKVideo = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKVideo, _ImageKitComponent);\n    var _super = _createSuper(IKVideo);\n    function IKVideo(props, context) {\n      var _this;\n      _classCallCheck$1(this, IKVideo);\n      _this = _super.call(this, props, context);\n      _this.videoRef = /*#__PURE__*/React__default['default'].createRef();\n      var _getSrc = getSrc(_this.props, _this.getIKClient(), _this.getContext()),\n        originalSrc = _getSrc.originalSrc;\n      _this.state = {\n        currentUrl: originalSrc,\n        contextOptions: {}\n      };\n      return _this;\n    }\n    _createClass$1(IKVideo, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.setState({\n          contextOptions: this.getContext()\n        });\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        var _this2 = this;\n        var contextOptions = this.getContext();\n        if (areObjectsDifferent(prevProps, this.props, propsAffectingURL$1) || areObjectsDifferent(prevState.contextOptions, contextOptions, propsAffectingURL$1)) {\n          var _getSrc2 = getSrc(this.props, this.getIKClient(), this.getContext()),\n            originalSrc = _getSrc2.originalSrc;\n          this.setState({\n            currentUrl: originalSrc\n          }, function () {\n            _this2.setState({\n              contextOptions: _this2.getContext()\n            });\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var currentUrl = this.state.currentUrl;\n        var _this$props = this.props,\n          urlEndpoint = _this$props.urlEndpoint,\n          path = _this$props.path,\n          src = _this$props.src,\n          transformation = _this$props.transformation,\n          transformationPosition = _this$props.transformationPosition,\n          queryParameters = _this$props.queryParameters,\n          restProps = _objectWithoutProperties(_this$props, [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"]);\n        return /*#__PURE__*/React__default['default'].createElement(\"video\", _extends({}, restProps, {\n          ref: this.videoRef\n        }), /*#__PURE__*/React__default['default'].createElement(\"source\", {\n          src: currentUrl,\n          type: \"video/mp4\"\n        }));\n      }\n    }]);\n    return IKVideo;\n  }(ImageKitComponent);\n  IKVideo.propTypes = COMBINED_IMAGE_PROP_TYPES$1;\n  var PROP_TYPES = _objectSpread2$1(_objectSpread2$1({}, Props$2), Props$1);\n  var IKUpload = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKUpload, _ImageKitComponent);\n    var _super = _createSuper(IKUpload);\n    function IKUpload() {\n      var _temp, _this;\n      _classCallCheck$1(this, IKUpload);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      return _possibleConstructorReturn(_this, (_temp = _this = _super.call.apply(_super, [this].concat(args)), _this.state = {}, _temp));\n    }\n    _createClass$1(IKUpload, [{\n      key: \"abort\",\n      value: function abort() {\n        if (this.state.xhr) {\n          this.state.xhr.abort();\n        }\n      }\n    }, {\n      key: \"uploadFile\",\n      value: function uploadFile(e) {\n        var _e$target$files,\n          _this2 = this;\n        var contextOptions = this.getContext();\n        var _this$props = this.props,\n          fileName = _this$props.fileName,\n          useUniqueFileName = _this$props.useUniqueFileName,\n          tags = _this$props.tags,\n          folder = _this$props.folder,\n          isPrivateFile = _this$props.isPrivateFile,\n          customCoordinates = _this$props.customCoordinates,\n          responseFields = _this$props.responseFields,\n          extensions = _this$props.extensions,\n          webhookUrl = _this$props.webhookUrl,\n          overwriteFile = _this$props.overwriteFile,\n          overwriteAITags = _this$props.overwriteAITags,\n          overwriteTags = _this$props.overwriteTags,\n          overwriteCustomMetadata = _this$props.overwriteCustomMetadata,\n          customMetadata = _this$props.customMetadata,\n          onError = _this$props.onError,\n          onSuccess = _this$props.onSuccess;\n        var publicKey = this.props.publicKey || contextOptions.publicKey;\n        var authenticationEndpoint = this.props.authenticationEndpoint || contextOptions.authenticationEndpoint;\n        var urlEndpoint = this.props.urlEndpoint || contextOptions.urlEndpoint;\n        if (!publicKey || publicKey.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing publicKey\"\n            });\n          }\n          return;\n        }\n        if (!authenticationEndpoint || authenticationEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing authenticationEndpoint\"\n            });\n          }\n          return;\n        }\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing urlEndpoint\"\n            });\n          }\n          return;\n        }\n        var ikClient = this.getIKClient();\n        var file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n        if (!file) {\n          return;\n        }\n        if (this.props.validateFile && !this.props.validateFile(file)) {\n          return;\n        }\n        if (this.props.onUploadStart && typeof this.props.onUploadStart === \"function\") {\n          this.props.onUploadStart(e);\n        }\n        var xhr = new XMLHttpRequest();\n        var progressCb = function progressCb(e) {\n          if (_this2.props.onUploadProgress && typeof _this2.props.onUploadProgress === 'function') {\n            _this2.props.onUploadProgress(e);\n          }\n        };\n        xhr.upload.addEventListener('progress', progressCb);\n        var params = {\n          file: file,\n          fileName: fileName || file.name,\n          useUniqueFileName: useUniqueFileName,\n          tags: tags,\n          folder: folder,\n          isPrivateFile: isPrivateFile,\n          customCoordinates: customCoordinates,\n          responseFields: responseFields,\n          extensions: extensions,\n          webhookUrl: webhookUrl,\n          overwriteFile: overwriteFile,\n          overwriteAITags: overwriteAITags,\n          overwriteTags: overwriteTags,\n          overwriteCustomMetadata: overwriteCustomMetadata,\n          customMetadata: customMetadata,\n          xhr: xhr\n        };\n        ikClient.upload(params, function (err, result) {\n          if (err) {\n            if (onError && typeof onError === \"function\") {\n              onError(err);\n            }\n          } else {\n            if (onSuccess && typeof onSuccess === \"function\") {\n              onSuccess(result);\n            }\n          }\n          xhr.upload.removeEventListener('progress', progressCb);\n        }, {\n          publicKey: publicKey,\n          authenticationEndpoint: authenticationEndpoint\n        });\n        this.setState({\n          xhr: xhr\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n        var _this$props2 = this.props,\n          publicKey = _this$props2.publicKey,\n          urlEndpoint = _this$props2.urlEndpoint,\n          authenticationEndpoint = _this$props2.authenticationEndpoint,\n          fileName = _this$props2.fileName,\n          useUniqueFileName = _this$props2.useUniqueFileName,\n          tags = _this$props2.tags,\n          folder = _this$props2.folder,\n          isPrivateFile = _this$props2.isPrivateFile,\n          customCoordinates = _this$props2.customCoordinates,\n          responseFields = _this$props2.responseFields,\n          onError = _this$props2.onError,\n          onSuccess = _this$props2.onSuccess,\n          onUploadStart = _this$props2.onUploadStart,\n          onUploadProgress = _this$props2.onUploadProgress,\n          inputRef = _this$props2.inputRef,\n          validateFile = _this$props2.validateFile,\n          restProps = _objectWithoutProperties(_this$props2, [\"publicKey\", \"urlEndpoint\", \"authenticationEndpoint\", \"fileName\", \"useUniqueFileName\", \"tags\", \"folder\", \"isPrivateFile\", \"customCoordinates\", \"responseFields\", \"onError\", \"onSuccess\", \"onUploadStart\", \"onUploadProgress\", \"inputRef\", \"validateFile\"]);\n        return /*#__PURE__*/React__default['default'].createElement(\"input\", _extends({}, restProps, {\n          ref: inputRef,\n          type: \"file\",\n          onChange: function onChange(e) {\n            if (_this3.props.onChange && typeof _this3.props.onChange === \"function\") {\n              _this3.props.onChange(e);\n            }\n            _this3.uploadFile(e);\n          }\n        }));\n      }\n    }]);\n    return IKUpload;\n  }(ImageKitComponent);\n  IKUpload.propTypes = PROP_TYPES;\n  IKUpload.defaultProps = {\n    useUniqueFileName: true,\n    isPrivateFile: false,\n    customCoordinates: \"\",\n    tags: [],\n    folder: \"/\",\n    responseFields: []\n  };\n  exports.IKContext = IKContext;\n  exports.IKCore = ImageKit;\n  exports.IKImage = IKImage;\n  exports.IKUpload = IKUpload;\n  exports.IKVideo = IKVideo;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"names":["global","factory","exports","module","require","define","amd","globalThis","self","ImageKitReact","React","_interopDefaultLegacy","e","React__default","_typeof","obj","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","value","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","version","errorMessages","MANDATORY_INITIALIZATION_MISSING","message","help","INVALID_TRANSFORMATION_POSITION","PRIVATE_KEY_CLIENT_SIDE","MISSING_UPLOAD_DATA","MISSING_UPLOAD_FILE_PARAMETER","MISSING_UPLOAD_FILENAME_PARAMETER","MISSING_AUTHENTICATION_ENDPOINT","MISSING_PUBLIC_KEY","AUTH_ENDPOINT_TIMEOUT","AUTH_ENDPOINT_NETWORK_ERROR","AUTH_INVALID_RESPONSE","UPLOAD_ENDPOINT_NETWORK_ERROR","INVALID_UPLOAD_OPTIONS","respond","isError","response","callback","getResponseHeaderMap","xhr","headers","responseHeaders","getAllResponseHeaders","trim","split","map","keyValue","addResponseHeadersAndBody","body","responseMetadata","statusCode","status","request","uploadFileXHR","formData","options","generateSignatureToken","authenticationEndpoint","then","signaturObj","append","signature","String","expire","token","uploadFile","result","ex","Promise","resolve","reject","XMLHttpRequest","timeout","urlObj","URL","searchParams","set","Math","random","toString","open","ontimeout","onerror","onload","JSON","parse","responseText","send","uploadResponse","uploadError","upload","uploadOptions","file","fileName","publicKey","FormData","Array","isArray","tags","join","responseFields","extensions","stringify","customMetadata","undefined","supportedTransforms","width","height","aspectRatio","quality","crop","cropMode","focus","x","y","format","radius","background","border","rotation","rotate","blur","named","overlayImage","overlayImageAspectRatio","overlayImageBackground","overlayImageBorder","overlayImageDPR","overlayImageQuality","overlayImageCropping","overlayImageTrim","overlayX","overlayY","overlayFocus","overlayHeight","overlayWidth","overlayText","overlayTextFontSize","overlayTextFontFamily","overlayTextColor","overlayTextTransparency","overlayAlpha","overlayTextTypography","overlayBackground","overlayTextEncoded","overlayTextWidth","overlayTextBackground","overlayTextPadding","overlayTextInnerAlignment","overlayRadius","progressive","lossless","metadata","colorProfile","defaultImage","dpr","effectSharpen","effectUSM","effectContrast","effectGray","original","raw","DEFAULT_TRANSFORMATION_POSITION","QUERY_TRANSFORMATION_POSITION","VALID_TRANSFORMATION_POSITIONS","CHAIN_TRANSFORM_DELIMITER","TRANSFORM_DELIMITER","TRANSFORM_KEY_VALUE_DELIMITER","transformationUtils","getDefault","addAsQueryParameter","transformationPosition","validParameters","indexOf","getTransformKey","transform","toLowerCase","getChainTransformDelimiter","getTransformDelimiter","getTransformKeyValueDelimiter","TRANSFORMATION_PARAMETER","removeTrailingSlash","str","substring","removeLeadingSlash","slice","pathJoin","parts","sep","separator","replace","RegExp","buildURL","opts","path","src","isSrcParameterUsedForURL","urlEndpointPattern","urlEndpoint","pathname","console","error","queryParameters","transformationString","constructTransformationString","transformation","href","parsedTransforms","l","parsedTransformStep","transformKey","url","urlOpts","defaultOptions","mandatoryParametersAvailable","promisify","thisContext","fn","_len","args","_key","Error","call","concat","err","_len2","results","_key2","pop","ImageKit","sdkVersion","url$1","urlOptions","upload$1","callbackOrOptions","mergedOptions","_ref","userProvidedXHR","_classCallCheck$1","_defineProperties$1","_createClass$1","_defineProperty$1","_extends","assign","hasOwnProperty","ownKeys$1","_objectSpread2$1","_inherits","subClass","superClass","create","_setPrototypeOf","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","p","_isNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_createSuper","Derived","hasNativeReflectConstruct","_createSuperInternal","Super","NewTarget","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","_arrayLikeToArray","iter","from","minLen","n","name","test","len","arr2","ImageKitContextType","createContext","ImageKitComponent","_PureComponent","_super","context","_this","getContext","bind","getIKClient","contextOptions","ikClient","render","PureComponent","contextType","createCommonjsModule","basedir","base","commonjsRequire","ReactPropTypesSecret","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","resetWarningCache","factoryWithThrowingShims","shim","propName","componentName","location","propFullName","secret","isRequired","getShim","ReactPropTypes","array","bool","func","number","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","propTypes","Props","loading","lqip","active","threshold","Props$1","useUniqueFileName","isPrivateFile","folder","customCoordinates","webhookUrl","overwriteFile","overwriteAITags","overwriteTags","overwriteCustomMetadata","onError","onSuccess","onUploadStart","onUploadProgress","inputRef","validateFile","Props$2","IKContextCombinedProps","IKContext","_ImageKitComponent","extractContextOptions","propKeys","children","createElement","Provider","COMBINED_IMAGE_PROP_TYPES","fetchEffectiveConnection","navigator","connection","effectiveType","areObjectsDifferent","prevProps","newProps","propsAffectingURL","index","getSrc","originalSrc","round","newTransformation","lqipSrc","getIKElementsUrl","_ref2","_ref3","_ref2$lqip","intersected","originalSrcLoaded","isLqipActive","IKImage","imageRef","createRef","_getSrc","state","currentUrl","updateImageUrl","setState","triggerOriginalImageLoad","_this2","img","Image","componentDidMount","_this3","image","current","_this$props","window","connectionType","rootMargin","imageObserver","IntersectionObserver","entries","el","isIntersecting","disconnect","observe","componentWillUnmount","componentDidUpdate","prevState","_this4","_getSrc2","_this$props2","restProps","alt","ref","Props$3","COMBINED_IMAGE_PROP_TYPES$1","propsAffectingURL$1","IKVideo","videoRef","type","PROP_TYPES","IKUpload","_temp","abort","_e$target$files","files","progressCb","addEventListener","params","removeEventListener","onChange","defaultProps","IKCore"],"sources":["E:/big_bang_assesment_tourism/makeyourtrip-ui/node_modules/imagekitio-react/dist/imagekitio-react.umd.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ImageKitReact = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var version = \"1.5.4\";\n  var errorMessages = {\n    MANDATORY_INITIALIZATION_MISSING: {\n      message: \"Missing urlEndpoint during SDK initialization\",\n      help: \"\"\n    },\n    INVALID_TRANSFORMATION_POSITION: {\n      message: \"Invalid transformationPosition parameter\",\n      help: \"\"\n    },\n    PRIVATE_KEY_CLIENT_SIDE: {\n      message: \"privateKey should not be passed on the client side\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_DATA: {\n      message: \"Missing data for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILE_PARAMETER: {\n      message: \"Missing file parameter for upload\",\n      help: \"\"\n    },\n    MISSING_UPLOAD_FILENAME_PARAMETER: {\n      message: \"Missing fileName parameter for upload\",\n      help: \"\"\n    },\n    MISSING_AUTHENTICATION_ENDPOINT: {\n      message: \"Missing authentication endpoint for upload\",\n      help: \"\"\n    },\n    MISSING_PUBLIC_KEY: {\n      message: \"Missing public key for upload\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_TIMEOUT: {\n      message: \"The authenticationEndpoint you provided timed out in 60 seconds\",\n      help: \"\"\n    },\n    AUTH_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to authenticationEndpoint failed due to network error\",\n      help: \"\"\n    },\n    AUTH_INVALID_RESPONSE: {\n      message: \"Invalid response from authenticationEndpoint. The SDK expects a JSON response with three fields i.e. signature, token and expire.\",\n      help: \"\"\n    },\n    UPLOAD_ENDPOINT_NETWORK_ERROR: {\n      message: \"Request to ImageKit upload endpoint failed due to network error\",\n      help: \"\"\n    },\n    INVALID_UPLOAD_OPTIONS: {\n      message: \"Invalid uploadOptions parameter\",\n      help: \"\"\n    }\n  };\n\n  function respond(isError, response, callback) {\n    if (typeof callback == \"function\") {\n      if (isError) {\n        callback(response, null);\n      } else {\n        callback(null, response);\n      }\n    }\n  }\n\n  function getResponseHeaderMap(xhr) {\n    var headers = {};\n    var responseHeaders = xhr.getAllResponseHeaders();\n\n    if (Object.keys(responseHeaders).length) {\n      responseHeaders.trim().split(/[\\r\\n]+/).map(function (value) {\n        return value.split(/: /);\n      }).forEach(function (keyValue) {\n        headers[keyValue[0].trim()] = keyValue[1].trim();\n      });\n    }\n\n    return headers;\n  }\n\n  var addResponseHeadersAndBody = function addResponseHeadersAndBody(body, xhr) {\n    var response = _objectSpread2({}, body);\n\n    var responseMetadata = {\n      statusCode: xhr.status,\n      headers: getResponseHeaderMap(xhr)\n    };\n    Object.defineProperty(response, \"$ResponseMetadata\", {\n      value: responseMetadata,\n      enumerable: false,\n      writable: false\n    });\n    return response;\n  };\n\n  var request = function request(uploadFileXHR, formData, options, callback) {\n    generateSignatureToken(options.authenticationEndpoint).then(function (signaturObj) {\n      formData.append(\"signature\", signaturObj.signature);\n      formData.append(\"expire\", String(signaturObj.expire));\n      formData.append(\"token\", signaturObj.token);\n      uploadFile(uploadFileXHR, formData).then(function (result) {\n        return respond(false, result, callback);\n      }, function (ex) {\n        return respond(true, ex, callback);\n      });\n    }, function (ex) {\n      return respond(true, ex, callback);\n    });\n  };\n\n  var generateSignatureToken = function generateSignatureToken(authenticationEndpoint) {\n    return new Promise(function (resolve, reject) {\n      var xhr = new XMLHttpRequest();\n      xhr.timeout = 60000;\n      var urlObj = new URL(authenticationEndpoint);\n      urlObj.searchParams.set(\"t\", Math.random().toString());\n      xhr.open('GET', urlObj.toString());\n\n      xhr.ontimeout = function (e) {\n        return reject(errorMessages.AUTH_ENDPOINT_TIMEOUT);\n      };\n\n      xhr.onerror = function () {\n        return reject(errorMessages.AUTH_ENDPOINT_NETWORK_ERROR);\n      };\n\n      xhr.onload = function () {\n        if (xhr.status === 200) {\n          try {\n            var body = JSON.parse(xhr.responseText);\n            var obj = {\n              signature: body.signature,\n              expire: body.expire,\n              token: body.token\n            };\n\n            if (!obj.signature || !obj.expire || !obj.token) {\n              return reject(errorMessages.AUTH_INVALID_RESPONSE);\n            }\n\n            return resolve(obj);\n          } catch (ex) {\n            return reject(errorMessages.AUTH_INVALID_RESPONSE);\n          }\n        } else {\n          return reject(errorMessages.AUTH_INVALID_RESPONSE);\n        }\n      };\n\n      xhr.send();\n    });\n  };\n\n  var uploadFile = function uploadFile(uploadFileXHR, formData) {\n    return new Promise(function (resolve, reject) {\n      uploadFileXHR.open('POST', 'https://upload.imagekit.io/api/v1/files/upload');\n\n      uploadFileXHR.onerror = function (e) {\n        return reject(errorMessages.UPLOAD_ENDPOINT_NETWORK_ERROR);\n      };\n\n      uploadFileXHR.onload = function () {\n        if (uploadFileXHR.status === 200) {\n          try {\n            var body = JSON.parse(uploadFileXHR.responseText);\n            var uploadResponse = addResponseHeadersAndBody(body, uploadFileXHR);\n            return resolve(uploadResponse);\n          } catch (ex) {\n            return reject(ex);\n          }\n        } else {\n          try {\n            var body = JSON.parse(uploadFileXHR.responseText);\n            var uploadError = addResponseHeadersAndBody(body, uploadFileXHR);\n            return reject(uploadError);\n          } catch (ex) {\n            return reject(ex);\n          }\n        }\n      };\n\n      uploadFileXHR.send(formData);\n    });\n  };\n\n  var upload = function upload(xhr, uploadOptions, options, callback) {\n    if (!uploadOptions.file) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILE_PARAMETER, callback);\n      return;\n    }\n\n    if (!uploadOptions.fileName) {\n      respond(true, errorMessages.MISSING_UPLOAD_FILENAME_PARAMETER, callback);\n      return;\n    }\n\n    if (!options.authenticationEndpoint) {\n      respond(true, errorMessages.MISSING_AUTHENTICATION_ENDPOINT, callback);\n      return;\n    }\n\n    if (!options.publicKey) {\n      respond(true, errorMessages.MISSING_PUBLIC_KEY, callback);\n      return;\n    }\n\n    var formData = new FormData();\n    var key;\n\n    for (key in uploadOptions) {\n      if (key) {\n        if (key === \"file\" && typeof uploadOptions.file != \"string\") {\n          formData.append('file', uploadOptions.file, String(uploadOptions.fileName));\n        } else if (key === \"tags\" && Array.isArray(uploadOptions.tags)) {\n          formData.append('tags', uploadOptions.tags.join(\",\"));\n        } else if (key === \"responseFields\" && Array.isArray(uploadOptions.responseFields)) {\n          formData.append('responseFields', uploadOptions.responseFields.join(\",\"));\n        } else if (key === \"extensions\" && Array.isArray(uploadOptions.extensions)) {\n          formData.append('extensions', JSON.stringify(uploadOptions.extensions));\n        } else if (key === \"customMetadata\" && _typeof(uploadOptions.customMetadata) === \"object\" && !Array.isArray(uploadOptions.customMetadata) && uploadOptions.customMetadata !== null) {\n          formData.append('customMetadata', JSON.stringify(uploadOptions.customMetadata));\n        } else if (uploadOptions[key] !== undefined) {\n          formData.append(key, String(uploadOptions[key]));\n        }\n      }\n    }\n\n    formData.append(\"publicKey\", options.publicKey);\n    request(xhr, formData, _objectSpread2(_objectSpread2({}, options), {}, {\n      authenticationEndpoint: options.authenticationEndpoint\n    }), callback);\n  };\n\n  var supportedTransforms = {\n    width: \"w\",\n    height: \"h\",\n    aspectRatio: \"ar\",\n    quality: \"q\",\n    crop: \"c\",\n    cropMode: \"cm\",\n    focus: \"fo\",\n    x: \"x\",\n    y: \"y\",\n    format: \"f\",\n    radius: \"r\",\n    background: \"bg\",\n    border: \"b\",\n    rotation: \"rt\",\n    rotate: \"rt\",\n    blur: \"bl\",\n    named: \"n\",\n    overlayImage: \"oi\",\n    overlayImageAspectRatio: \"oiar\",\n    overlayImageBackground: \"oibg\",\n    overlayImageBorder: \"oib\",\n    overlayImageDPR: \"oidpr\",\n    overlayImageQuality: \"oiq\",\n    overlayImageCropping: \"oic\",\n    overlayImageTrim: \"oit\",\n    overlayX: \"ox\",\n    overlayY: \"oy\",\n    overlayFocus: \"ofo\",\n    overlayHeight: \"oh\",\n    overlayWidth: \"ow\",\n    overlayText: \"ot\",\n    overlayTextFontSize: \"ots\",\n    overlayTextFontFamily: \"otf\",\n    overlayTextColor: \"otc\",\n    overlayTextTransparency: \"oa\",\n    overlayAlpha: \"oa\",\n    overlayTextTypography: \"ott\",\n    overlayBackground: \"obg\",\n    overlayTextEncoded: \"ote\",\n    overlayTextWidth: \"otw\",\n    overlayTextBackground: \"otbg\",\n    overlayTextPadding: \"otp\",\n    overlayTextInnerAlignment: \"otia\",\n    overlayRadius: \"or\",\n    progressive: \"pr\",\n    lossless: \"lo\",\n    trim: \"t\",\n    metadata: \"md\",\n    colorProfile: \"cp\",\n    defaultImage: \"di\",\n    dpr: \"dpr\",\n    effectSharpen: \"e-sharpen\",\n    effectUSM: \"e-usm\",\n    effectContrast: \"e-contrast\",\n    effectGray: \"e-grayscale\",\n    original: \"orig\",\n    raw: \"raw\"\n  };\n  var DEFAULT_TRANSFORMATION_POSITION = \"path\";\n  var QUERY_TRANSFORMATION_POSITION = \"query\";\n  var VALID_TRANSFORMATION_POSITIONS = [DEFAULT_TRANSFORMATION_POSITION, QUERY_TRANSFORMATION_POSITION];\n  var CHAIN_TRANSFORM_DELIMITER = \":\";\n  var TRANSFORM_DELIMITER = \",\";\n  var TRANSFORM_KEY_VALUE_DELIMITER = \"-\";\n  var transformationUtils = {\n    getDefault: function getDefault() {\n      return DEFAULT_TRANSFORMATION_POSITION;\n    },\n    addAsQueryParameter: function addAsQueryParameter(options) {\n      return options.transformationPosition === QUERY_TRANSFORMATION_POSITION;\n    },\n    validParameters: function validParameters(options) {\n      if (typeof options.transformationPosition == \"undefined\") return false;\n      return VALID_TRANSFORMATION_POSITIONS.indexOf(options.transformationPosition) != -1;\n    },\n    getTransformKey: function getTransformKey(transform) {\n      if (!transform) {\n        return \"\";\n      }\n\n      return supportedTransforms[transform] || supportedTransforms[transform.toLowerCase()] || \"\";\n    },\n    getChainTransformDelimiter: function getChainTransformDelimiter() {\n      return CHAIN_TRANSFORM_DELIMITER;\n    },\n    getTransformDelimiter: function getTransformDelimiter() {\n      return TRANSFORM_DELIMITER;\n    },\n    getTransformKeyValueDelimiter: function getTransformKeyValueDelimiter() {\n      return TRANSFORM_KEY_VALUE_DELIMITER;\n    }\n  };\n  var TRANSFORMATION_PARAMETER = \"tr\";\n\n  function removeTrailingSlash(str) {\n    if (typeof str == \"string\" && str[str.length - 1] == \"/\") {\n      str = str.substring(0, str.length - 1);\n    }\n\n    return str;\n  }\n\n  function removeLeadingSlash(str) {\n    if (typeof str == \"string\" && str[0] == \"/\") {\n      str = str.slice(1);\n    }\n\n    return str;\n  }\n\n  function pathJoin(parts, sep) {\n    var separator = sep || \"/\";\n    var replace = new RegExp(separator + \"{1,}\", \"g\");\n    return parts.join(separator).replace(replace, separator);\n  }\n\n  var buildURL = function buildURL(opts) {\n    if (!opts.path && !opts.src) {\n      return \"\";\n    }\n\n    var urlObj, isSrcParameterUsedForURL, urlEndpointPattern;\n\n    try {\n      if (opts.path) {\n        urlEndpointPattern = new URL(opts.urlEndpoint).pathname;\n        urlObj = new URL(pathJoin([opts.urlEndpoint.replace(urlEndpointPattern, \"\"), opts.path]));\n      } else {\n        urlObj = new URL(opts.src);\n        isSrcParameterUsedForURL = true;\n      }\n    } catch (e) {\n      console.error(e);\n      return \"\";\n    }\n\n    for (var i in opts.queryParameters) {\n      urlObj.searchParams.append(i, String(opts.queryParameters[i]));\n    }\n\n    var transformationString = constructTransformationString(opts.transformation);\n\n    if (transformationString && transformationString.length) {\n      if (transformationUtils.addAsQueryParameter(opts) || isSrcParameterUsedForURL) {\n        urlObj.searchParams.append(TRANSFORMATION_PARAMETER, transformationString);\n      } else {\n        urlObj.pathname = pathJoin([TRANSFORMATION_PARAMETER + transformationUtils.getChainTransformDelimiter() + transformationString, urlObj.pathname]);\n      }\n    }\n\n    if (urlEndpointPattern) {\n      urlObj.pathname = pathJoin([urlEndpointPattern, urlObj.pathname]);\n    } else {\n      urlObj.pathname = pathJoin([urlObj.pathname]);\n    }\n\n    return urlObj.href;\n  };\n\n  function constructTransformationString(transformation) {\n    if (!Array.isArray(transformation)) {\n      return \"\";\n    }\n\n    var parsedTransforms = [];\n\n    for (var i = 0, l = transformation.length; i < l; i++) {\n      var parsedTransformStep = [];\n\n      for (var key in transformation[i]) {\n        var transformKey = transformationUtils.getTransformKey(key);\n\n        if (!transformKey) {\n          transformKey = key;\n        }\n\n        if (transformation[i][key] === \"-\") {\n          parsedTransformStep.push(transformKey);\n        } else if (key === \"raw\") {\n          parsedTransformStep.push(transformation[i][key]);\n        } else {\n          var value = transformation[i][key];\n\n          if (transformKey === \"oi\" || transformKey === \"di\") {\n            value = removeTrailingSlash(removeLeadingSlash(value || \"\"));\n            value = value.replace(/\\//g, \"@@\");\n          }\n\n          parsedTransformStep.push([transformKey, value].join(transformationUtils.getTransformKeyValueDelimiter()));\n        }\n      }\n\n      parsedTransforms.push(parsedTransformStep.join(transformationUtils.getTransformDelimiter()));\n    }\n\n    return parsedTransforms.join(transformationUtils.getChainTransformDelimiter());\n  }\n\n  var url = function url(urlOpts, defaultOptions) {\n    return buildURL(_objectSpread2(_objectSpread2({}, defaultOptions), urlOpts));\n  };\n\n  function mandatoryParametersAvailable(options) {\n    return options.urlEndpoint;\n  }\n\n  var promisify = function promisify(thisContext, fn) {\n    return function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      if (args.length === fn.length && typeof args[args.length - 1] !== \"undefined\") {\n        if (typeof args[args.length - 1] !== \"function\") {\n          throw new Error(\"Callback must be a function.\");\n        }\n\n        fn.call.apply(fn, [thisContext].concat(args));\n      } else {\n        return new Promise(function (resolve, reject) {\n          var callback = function callback(err) {\n            if (err) {\n              return reject(err);\n            } else {\n              for (var _len2 = arguments.length, results = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                results[_key2 - 1] = arguments[_key2];\n              }\n\n              resolve(results.length > 1 ? results : results[0]);\n            }\n          };\n\n          args.pop();\n          args.push(callback);\n          fn.call.apply(fn, [thisContext].concat(args));\n        });\n      }\n    };\n  };\n\n  var ImageKit = function () {\n    function ImageKit(opts) {\n      _classCallCheck(this, ImageKit);\n\n      _defineProperty(this, \"options\", {\n        sdkVersion: \"javascript-\".concat(version),\n        publicKey: \"\",\n        urlEndpoint: \"\",\n        transformationPosition: transformationUtils.getDefault()\n      });\n\n      this.options = _objectSpread2(_objectSpread2({}, this.options), opts || {});\n\n      if (!mandatoryParametersAvailable(this.options)) {\n        throw errorMessages.MANDATORY_INITIALIZATION_MISSING;\n      }\n\n      if (!transformationUtils.validParameters(this.options)) {\n        throw errorMessages.INVALID_TRANSFORMATION_POSITION;\n      }\n    }\n\n    _createClass(ImageKit, [{\n      key: \"url\",\n      value: function url$1(urlOptions) {\n        return url(urlOptions, this.options);\n      }\n    }, {\n      key: \"upload\",\n      value: function upload$1(uploadOptions, callbackOrOptions, options) {\n        var callback;\n\n        if (typeof callbackOrOptions === 'function') {\n          callback = callbackOrOptions;\n        } else {\n          options = callbackOrOptions || {};\n        }\n\n        if (!uploadOptions || _typeof(uploadOptions) !== \"object\") {\n          return respond(true, errorMessages.INVALID_UPLOAD_OPTIONS, callback);\n        }\n\n        var mergedOptions = _objectSpread2(_objectSpread2({}, this.options), options);\n\n        var _ref = uploadOptions || {},\n            userProvidedXHR = _ref.xhr;\n\n        delete uploadOptions.xhr;\n        var xhr = userProvidedXHR || new XMLHttpRequest();\n        return promisify(this, upload)(xhr, uploadOptions, mergedOptions, callback);\n      }\n    }]);\n\n    return ImageKit;\n  }();\n\n  function _classCallCheck$1(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties$1(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass$1(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties$1(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties$1(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty$1(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function ownKeys$1(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2$1(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys$1(Object(source), true).forEach(function (key) {\n          _defineProperty$1(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys$1(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _createSuper(Derived) {\n    var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n    return function _createSuperInternal() {\n      var Super = _getPrototypeOf(Derived),\n          result;\n\n      if (hasNativeReflectConstruct) {\n        var NewTarget = _getPrototypeOf(this).constructor;\n\n        result = Reflect.construct(Super, arguments, NewTarget);\n      } else {\n        result = Super.apply(this, arguments);\n      }\n\n      return _possibleConstructorReturn(this, result);\n    };\n  }\n\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var ImageKitContextType = /*#__PURE__*/React.createContext(null);\n\n  var ImageKitComponent = /*#__PURE__*/function (_PureComponent) {\n    _inherits(ImageKitComponent, _PureComponent);\n\n    var _super = _createSuper(ImageKitComponent);\n\n    function ImageKitComponent(props, context) {\n      var _this;\n\n      _classCallCheck$1(this, ImageKitComponent);\n\n      _this = _super.call(this, props, context);\n      _this.getContext = _this.getContext.bind(_assertThisInitialized(_this));\n      return _this;\n    }\n\n    _createClass$1(ImageKitComponent, [{\n      key: \"getContext\",\n      value: function getContext() {\n        return this.context || {};\n      }\n    }, {\n      key: \"getIKClient\",\n      value: function getIKClient() {\n        var contextOptions = this.getContext();\n\n        if (contextOptions.ikClient) {\n          return contextOptions.ikClient;\n        }\n\n        var urlEndpoint = this.props.urlEndpoint;\n        urlEndpoint = urlEndpoint || contextOptions.urlEndpoint;\n\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          throw new Error(\"Missing urlEndpoint during initialization\");\n        }\n\n        var ikClient = new ImageKit({\n          urlEndpoint: urlEndpoint,\n          // @ts-ignore\n          sdkVersion: \"\"\n        });\n        return ikClient;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return null;\n      }\n    }]);\n\n    return ImageKitComponent;\n  }(React.PureComponent);\n\n  ImageKitComponent.contextType = ImageKitContextType;\n\n  function createCommonjsModule(fn, basedir, module) {\n  \treturn module = {\n  \t\tpath: basedir,\n  \t\texports: {},\n  \t\trequire: function (path, base) {\n  \t\t\treturn commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n  \t\t}\n  \t}, fn(module, module.exports), module.exports;\n  }\n\n  function commonjsRequire () {\n  \tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n  }\n\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n  function emptyFunction() {}\n\n  function emptyFunctionWithReset() {}\n\n  emptyFunctionWithReset.resetWarningCache = emptyFunction;\n\n  var factoryWithThrowingShims = function () {\n    function shim(props, propName, componentName, location, propFullName, secret) {\n      if (secret === ReactPropTypesSecret_1) {\n        // It is still safe when called from React.\n        return;\n      }\n\n      var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n      err.name = 'Invariant Violation';\n      throw err;\n    }\n    shim.isRequired = shim;\n\n    function getShim() {\n      return shim;\n    }\n    // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      elementType: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim,\n      checkPropTypes: emptyFunctionWithReset,\n      resetWarningCache: emptyFunction\n    };\n    ReactPropTypes.PropTypes = ReactPropTypes;\n    return ReactPropTypes;\n  };\n\n  var propTypes = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  {\n    // By explicitly using `prop-types` you are opting into new production behavior.\n    // http://fb.me/prop-types-in-prod\n    module.exports = factoryWithThrowingShims();\n  }\n  });\n\n  var Props = {\n    loading: propTypes.oneOf(['lazy']),\n    lqip: propTypes.shape({\n      active: propTypes.bool,\n      quality: propTypes.number,\n      threshold: propTypes.number,\n      blur: propTypes.number,\n      raw: propTypes.string\n    }),\n    path: propTypes.string,\n    src: propTypes.string,\n    queryParameters: propTypes.objectOf(propTypes.oneOfType([propTypes.string, propTypes.number]).isRequired),\n    transformation: propTypes.arrayOf(propTypes.object.isRequired),\n    transformationPosition: propTypes.oneOf(['path', 'query'])\n  };\n\n  var Props$1 = {\n    fileName: propTypes.string,\n    tags: propTypes.arrayOf(propTypes.string.isRequired),\n    useUniqueFileName: propTypes.bool,\n    responseFields: propTypes.array,\n    isPrivateFile: propTypes.bool,\n    folder: propTypes.string,\n    customCoordinates: propTypes.string,\n    extensions: propTypes.arrayOf(propTypes.object.isRequired),\n    webhookUrl: propTypes.string,\n    overwriteFile: propTypes.bool,\n    overwriteAITags: propTypes.bool,\n    overwriteTags: propTypes.bool,\n    overwriteCustomMetadata: propTypes.bool,\n    customMetadata: propTypes.any,\n    onError: propTypes.func,\n    onSuccess: propTypes.func,\n    onUploadStart: propTypes.func,\n    onUploadProgress: propTypes.func,\n    inputRef: propTypes.object,\n    validateFile: propTypes.func\n  };\n\n  var Props$2 = {\n    publicKey: propTypes.string,\n    urlEndpoint: propTypes.string,\n    authenticationEndpoint: propTypes.string\n  };\n  var IKContextCombinedProps = _objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({}, Props$2), Props), Props$1), Props$1), {}, {\n    ikClient: propTypes.instanceOf(ImageKit)\n  });\n\n  /**\n   * Provides a container for ImageKit components. Any option set in IKContext will be passed to the children.\n   *\n   * @example\n   *<IKContext  publicKey=\"<public key>\" urlEndpoint=\"url link\">\n   *    <!-- other tags -->\n   *    <Image src={link}/>\n   *</IKContext>\n   */\n\n  var IKContext = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKContext, _ImageKitComponent);\n\n    var _super = _createSuper(IKContext);\n\n    function IKContext() {\n      _classCallCheck$1(this, IKContext);\n\n      return _super.apply(this, arguments);\n    }\n\n    _createClass$1(IKContext, [{\n      key: \"extractContextOptions\",\n      value: function extractContextOptions(mergedOptions) {\n        var result = {};\n        var propKeys = Object.keys(IKContextCombinedProps);\n\n        for (var i = 0; i < propKeys.length; i++) {\n          var key = propKeys[i];\n          var value = mergedOptions[key];\n\n          if (value) {\n            result[key] = value;\n          }\n        }\n\n        return result;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var children = this.props.children;\n\n        var mergedOptions = _objectSpread2$1(_objectSpread2$1({}, this.getContext()), this.props);\n\n        var contextOptions = this.extractContextOptions(mergedOptions);\n\n        if (contextOptions.urlEndpoint && contextOptions.urlEndpoint.trim() !== \"\") {\n          contextOptions.ikClient = new ImageKit({\n            urlEndpoint: contextOptions.urlEndpoint,\n            // @ts-ignore\n            sdkVersion: \"\"\n          });\n        }\n\n        return /*#__PURE__*/React__default['default'].createElement(ImageKitContextType.Provider, {\n          value: contextOptions\n        }, children);\n      }\n    }]);\n\n    return IKContext;\n  }(ImageKitComponent);\n\n  IKContext.propTypes = IKContextCombinedProps;\n\n  var COMBINED_IMAGE_PROP_TYPES = _objectSpread2$1(_objectSpread2$1({}, Props$2), Props);\n\n  var fetchEffectiveConnection = function fetchEffectiveConnection() {\n    try {\n      return navigator.connection.effectiveType;\n    } catch (ex) {\n      return \"4g\";\n    }\n  };\n  var areObjectsDifferent = function areObjectsDifferent(prevProps, newProps, propsAffectingURL) {\n    for (var index = 0; index < propsAffectingURL.length; index++) {\n      if (prevProps[propsAffectingURL[index]] !== newProps[propsAffectingURL[index]]) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n  var getSrc = function getSrc(_ref, ikClient, contextOptions) {\n    var urlEndpoint = _ref.urlEndpoint,\n        lqip = _ref.lqip,\n        src = _ref.src,\n        path = _ref.path,\n        transformation = _ref.transformation,\n        transformationPosition = _ref.transformationPosition,\n        queryParameters = _ref.queryParameters;\n    // @ts-ignore\n    var options = {\n      urlEndpoint: urlEndpoint || contextOptions.urlEndpoint,\n      src: src || contextOptions.src || undefined,\n      path: path || contextOptions.path || undefined,\n      transformation: transformation || contextOptions.transformation,\n      transformationPosition: transformationPosition || contextOptions.transformationPosition || undefined,\n      queryParameters: queryParameters || contextOptions.queryParameters || {}\n    };\n    var result = {\n      originalSrc: ikClient.url(options)\n    };\n\n    if (lqip && lqip.active) {\n      var quality = Math.round(lqip.quality || lqip.threshold || 20);\n      var blur = Math.round(lqip.blur || 6);\n      var newTransformation = options.transformation ? _toConsumableArray(options.transformation) : [];\n\n      if (lqip.raw && typeof lqip.raw === \"string\" && lqip.raw.trim() != \"\") {\n        newTransformation.push({\n          raw: lqip.raw.trim()\n        });\n      } else {\n        newTransformation.push({\n          quality: String(quality),\n          blur: String(blur)\n        });\n      }\n\n      result.lqipSrc = ikClient.url(_objectSpread2$1(_objectSpread2$1({}, options), {}, {\n        transformation: newTransformation\n      }));\n    }\n\n    return result;\n  };\n  var getIKElementsUrl = function getIKElementsUrl(_ref2, _ref3) {\n    var _ref2$lqip = _ref2.lqip,\n        lqip = _ref2$lqip === void 0 ? null : _ref2$lqip,\n        loading = _ref2.loading;\n    var intersected = _ref3.intersected,\n        originalSrcLoaded = _ref3.originalSrcLoaded,\n        originalSrc = _ref3.originalSrc,\n        lqipSrc = _ref3.lqipSrc;\n\n    /*\n      No lazy loading no lqip\n        src=originalImage\n      No lazy loading lqip\n        src=lqip\n        src=originalImage (when loaded)\n      lazy loading and no lqip\n        src=''\n        onIntersect:\n        src=originalImage\n      lazy loading and lqip\n        src=lqip\n        onIntersect:\n        src=originalImage (when loaded)\n    */\n    var isLqipActive = function isLqipActive(lqip) {\n      return lqip && lqip.active;\n    };\n\n    if (loading !== \"lazy\" && !isLqipActive(lqip)) {\n      return originalSrc;\n    } else if (loading !== \"lazy\" && isLqipActive(lqip)) {\n      if (originalSrcLoaded) {\n        return originalSrc;\n      } else {\n        return lqipSrc;\n      }\n    } else if (loading === \"lazy\" && !isLqipActive(lqip)) {\n      if (intersected) {\n        return originalSrc;\n      } else {\n        return \"\";\n      }\n    } else {\n      //  if (loading === \"lazy\" && isLqipActive(lqip))\n      if (intersected && originalSrcLoaded) {\n        return originalSrc;\n      } else {\n        return lqipSrc;\n      }\n    }\n  };\n\n  var propsAffectingURL = [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"];\n\n  var IKImage = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKImage, _ImageKitComponent);\n\n    var _super = _createSuper(IKImage);\n\n    function IKImage(props, context) {\n      var _this;\n\n      _classCallCheck$1(this, IKImage);\n\n      _this = _super.call(this, props, context);\n      _this.imageRef = /*#__PURE__*/React__default['default'].createRef();\n\n      var _getSrc = getSrc(_this.props, _this.getIKClient(), _this.getContext()),\n          originalSrc = _getSrc.originalSrc,\n          lqipSrc = _getSrc.lqipSrc;\n\n      _this.state = {\n        currentUrl: undefined,\n        originalSrc: originalSrc,\n        lqipSrc: lqipSrc,\n        originalSrcLoaded: false,\n        intersected: false,\n        contextOptions: {}\n      };\n      return _this;\n    }\n\n    _createClass$1(IKImage, [{\n      key: \"updateImageUrl\",\n      value: function updateImageUrl() {\n        var url = getIKElementsUrl(this.props, this.state);\n        this.setState({\n          currentUrl: url\n        });\n      }\n    }, {\n      key: \"triggerOriginalImageLoad\",\n      value: function triggerOriginalImageLoad() {\n        var _this2 = this;\n\n        var img = new Image();\n\n        img.onload = function () {\n          _this2.setState({\n            originalSrcLoaded: true\n          }, function () {\n            _this2.updateImageUrl();\n          });\n        };\n\n        img.src = this.state.originalSrc;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this3 = this;\n\n        this.updateImageUrl();\n        this.setState({\n          contextOptions: this.getContext()\n        });\n        var image = this.imageRef.current;\n        var _this$props = this.props,\n            lqip = _this$props.lqip,\n            loading = _this$props.loading;\n\n        if (window && 'IntersectionObserver' in window && loading === \"lazy\") {\n          var connectionType = fetchEffectiveConnection(); // Values based on native lazy loading in Chrome - https://web.dev/native-lazy-loading/#improved-data-savings-and-distance-from-viewport-thresholds\n\n          var rootMargin = \"1250px\";\n          if (connectionType !== \"4g\") rootMargin = \"2500px\";\n          var imageObserver = new IntersectionObserver(function (entries) {\n            var el = entries[0];\n\n            if (el && el.isIntersecting) {\n              _this3.setState({\n                intersected: true\n              }, function () {\n                if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n                imageObserver.disconnect();\n\n                _this3.updateImageUrl();\n              });\n            }\n          }, {\n            rootMargin: \"\".concat(rootMargin, \" 0px \").concat(rootMargin, \" 0px\")\n          });\n          imageObserver.observe(image);\n          this.setState({\n            observe: imageObserver\n          });\n        } else {\n          // Load original image right away\n          this.setState({\n            intersected: true\n          }, function () {\n            if (lqip && lqip.active) _this3.triggerOriginalImageLoad();\n\n            _this3.updateImageUrl();\n          });\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        var observe = this.state.observe;\n        if (observe) observe.disconnect();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        var _this4 = this;\n\n        var contextOptions = this.getContext();\n\n        if (areObjectsDifferent(prevProps, this.props, propsAffectingURL) || areObjectsDifferent(prevState.contextOptions, contextOptions, propsAffectingURL)) {\n          var _getSrc2 = getSrc(this.props, this.getIKClient(), this.getContext()),\n              originalSrc = _getSrc2.originalSrc,\n              lqipSrc = _getSrc2.lqipSrc;\n\n          this.setState({\n            originalSrc: originalSrc,\n            lqipSrc: lqipSrc\n          }, function () {\n            _this4.updateImageUrl();\n\n            _this4.setState({\n              contextOptions: _this4.getContext()\n            });\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var currentUrl = this.state.currentUrl;\n\n        var _this$props2 = this.props,\n            urlEndpoint = _this$props2.urlEndpoint,\n            loading = _this$props2.loading,\n            lqip = _this$props2.lqip,\n            path = _this$props2.path,\n            src = _this$props2.src,\n            transformation = _this$props2.transformation,\n            transformationPosition = _this$props2.transformationPosition,\n            queryParameters = _this$props2.queryParameters,\n            restProps = _objectWithoutProperties(_this$props2, [\"urlEndpoint\", \"loading\", \"lqip\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"]);\n\n        return /*#__PURE__*/React__default['default'].createElement(\"img\", _extends({\n          alt: this.props.alt || \"\",\n          src: currentUrl,\n          ref: this.imageRef\n        }, restProps));\n      }\n    }]);\n\n    return IKImage;\n  }(ImageKitComponent);\n\n  IKImage.propTypes = COMBINED_IMAGE_PROP_TYPES;\n\n  var Props$3 = {\n    path: propTypes.string,\n    src: propTypes.string,\n    queryParameters: propTypes.objectOf(propTypes.oneOfType([propTypes.string, propTypes.number]).isRequired),\n    transformation: propTypes.arrayOf(propTypes.object.isRequired),\n    transformationPosition: propTypes.oneOf(['path', 'query'])\n  };\n\n  var COMBINED_IMAGE_PROP_TYPES$1 = _objectSpread2$1(_objectSpread2$1({}, Props$2), Props$3);\n\n  var propsAffectingURL$1 = [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"];\n\n  var IKVideo = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKVideo, _ImageKitComponent);\n\n    var _super = _createSuper(IKVideo);\n\n    function IKVideo(props, context) {\n      var _this;\n\n      _classCallCheck$1(this, IKVideo);\n\n      _this = _super.call(this, props, context);\n      _this.videoRef = /*#__PURE__*/React__default['default'].createRef();\n\n      var _getSrc = getSrc(_this.props, _this.getIKClient(), _this.getContext()),\n          originalSrc = _getSrc.originalSrc;\n\n      _this.state = {\n        currentUrl: originalSrc,\n        contextOptions: {}\n      };\n      return _this;\n    }\n\n    _createClass$1(IKVideo, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.setState({\n          contextOptions: this.getContext()\n        });\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        var _this2 = this;\n\n        var contextOptions = this.getContext();\n\n        if (areObjectsDifferent(prevProps, this.props, propsAffectingURL$1) || areObjectsDifferent(prevState.contextOptions, contextOptions, propsAffectingURL$1)) {\n          var _getSrc2 = getSrc(this.props, this.getIKClient(), this.getContext()),\n              originalSrc = _getSrc2.originalSrc;\n\n          this.setState({\n            currentUrl: originalSrc\n          }, function () {\n            _this2.setState({\n              contextOptions: _this2.getContext()\n            });\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var currentUrl = this.state.currentUrl;\n\n        var _this$props = this.props,\n            urlEndpoint = _this$props.urlEndpoint,\n            path = _this$props.path,\n            src = _this$props.src,\n            transformation = _this$props.transformation,\n            transformationPosition = _this$props.transformationPosition,\n            queryParameters = _this$props.queryParameters,\n            restProps = _objectWithoutProperties(_this$props, [\"urlEndpoint\", \"path\", \"src\", \"transformation\", \"transformationPosition\", \"queryParameters\"]);\n\n        return /*#__PURE__*/React__default['default'].createElement(\"video\", _extends({}, restProps, {\n          ref: this.videoRef\n        }), /*#__PURE__*/React__default['default'].createElement(\"source\", {\n          src: currentUrl,\n          type: \"video/mp4\"\n        }));\n      }\n    }]);\n\n    return IKVideo;\n  }(ImageKitComponent);\n\n  IKVideo.propTypes = COMBINED_IMAGE_PROP_TYPES$1;\n\n  var PROP_TYPES = _objectSpread2$1(_objectSpread2$1({}, Props$2), Props$1);\n\n  var IKUpload = /*#__PURE__*/function (_ImageKitComponent) {\n    _inherits(IKUpload, _ImageKitComponent);\n\n    var _super = _createSuper(IKUpload);\n\n    function IKUpload() {\n      var _temp, _this;\n\n      _classCallCheck$1(this, IKUpload);\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _possibleConstructorReturn(_this, (_temp = _this = _super.call.apply(_super, [this].concat(args)), _this.state = {}, _temp));\n    }\n\n    _createClass$1(IKUpload, [{\n      key: \"abort\",\n      value: function abort() {\n        if (this.state.xhr) {\n          this.state.xhr.abort();\n        }\n      }\n    }, {\n      key: \"uploadFile\",\n      value: function uploadFile(e) {\n        var _e$target$files,\n            _this2 = this;\n\n        var contextOptions = this.getContext();\n        var _this$props = this.props,\n            fileName = _this$props.fileName,\n            useUniqueFileName = _this$props.useUniqueFileName,\n            tags = _this$props.tags,\n            folder = _this$props.folder,\n            isPrivateFile = _this$props.isPrivateFile,\n            customCoordinates = _this$props.customCoordinates,\n            responseFields = _this$props.responseFields,\n            extensions = _this$props.extensions,\n            webhookUrl = _this$props.webhookUrl,\n            overwriteFile = _this$props.overwriteFile,\n            overwriteAITags = _this$props.overwriteAITags,\n            overwriteTags = _this$props.overwriteTags,\n            overwriteCustomMetadata = _this$props.overwriteCustomMetadata,\n            customMetadata = _this$props.customMetadata,\n            onError = _this$props.onError,\n            onSuccess = _this$props.onSuccess;\n        var publicKey = this.props.publicKey || contextOptions.publicKey;\n        var authenticationEndpoint = this.props.authenticationEndpoint || contextOptions.authenticationEndpoint;\n        var urlEndpoint = this.props.urlEndpoint || contextOptions.urlEndpoint;\n\n        if (!publicKey || publicKey.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing publicKey\"\n            });\n          }\n\n          return;\n        }\n\n        if (!authenticationEndpoint || authenticationEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing authenticationEndpoint\"\n            });\n          }\n\n          return;\n        }\n\n        if (!urlEndpoint || urlEndpoint.trim() === \"\") {\n          if (onError && typeof onError === \"function\") {\n            onError({\n              message: \"Missing urlEndpoint\"\n            });\n          }\n\n          return;\n        }\n\n        var ikClient = this.getIKClient();\n        var file = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n\n        if (!file) {\n          return;\n        }\n\n        if (this.props.validateFile && !this.props.validateFile(file)) {\n          return;\n        }\n\n        if (this.props.onUploadStart && typeof this.props.onUploadStart === \"function\") {\n          this.props.onUploadStart(e);\n        }\n\n        var xhr = new XMLHttpRequest();\n\n        var progressCb = function progressCb(e) {\n          if (_this2.props.onUploadProgress && typeof _this2.props.onUploadProgress === 'function') {\n            _this2.props.onUploadProgress(e);\n          }\n        };\n\n        xhr.upload.addEventListener('progress', progressCb);\n        var params = {\n          file: file,\n          fileName: fileName || file.name,\n          useUniqueFileName: useUniqueFileName,\n          tags: tags,\n          folder: folder,\n          isPrivateFile: isPrivateFile,\n          customCoordinates: customCoordinates,\n          responseFields: responseFields,\n          extensions: extensions,\n          webhookUrl: webhookUrl,\n          overwriteFile: overwriteFile,\n          overwriteAITags: overwriteAITags,\n          overwriteTags: overwriteTags,\n          overwriteCustomMetadata: overwriteCustomMetadata,\n          customMetadata: customMetadata,\n          xhr: xhr\n        };\n        ikClient.upload(params, function (err, result) {\n          if (err) {\n            if (onError && typeof onError === \"function\") {\n              onError(err);\n            }\n          } else {\n            if (onSuccess && typeof onSuccess === \"function\") {\n              onSuccess(result);\n            }\n          }\n\n          xhr.upload.removeEventListener('progress', progressCb);\n        }, {\n          publicKey: publicKey,\n          authenticationEndpoint: authenticationEndpoint\n        });\n        this.setState({\n          xhr: xhr\n        });\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        var _this$props2 = this.props,\n            publicKey = _this$props2.publicKey,\n            urlEndpoint = _this$props2.urlEndpoint,\n            authenticationEndpoint = _this$props2.authenticationEndpoint,\n            fileName = _this$props2.fileName,\n            useUniqueFileName = _this$props2.useUniqueFileName,\n            tags = _this$props2.tags,\n            folder = _this$props2.folder,\n            isPrivateFile = _this$props2.isPrivateFile,\n            customCoordinates = _this$props2.customCoordinates,\n            responseFields = _this$props2.responseFields,\n            onError = _this$props2.onError,\n            onSuccess = _this$props2.onSuccess,\n            onUploadStart = _this$props2.onUploadStart,\n            onUploadProgress = _this$props2.onUploadProgress,\n            inputRef = _this$props2.inputRef,\n            validateFile = _this$props2.validateFile,\n            restProps = _objectWithoutProperties(_this$props2, [\"publicKey\", \"urlEndpoint\", \"authenticationEndpoint\", \"fileName\", \"useUniqueFileName\", \"tags\", \"folder\", \"isPrivateFile\", \"customCoordinates\", \"responseFields\", \"onError\", \"onSuccess\", \"onUploadStart\", \"onUploadProgress\", \"inputRef\", \"validateFile\"]);\n\n        return /*#__PURE__*/React__default['default'].createElement(\"input\", _extends({}, restProps, {\n          ref: inputRef,\n          type: \"file\",\n          onChange: function onChange(e) {\n            if (_this3.props.onChange && typeof _this3.props.onChange === \"function\") {\n              _this3.props.onChange(e);\n            }\n\n            _this3.uploadFile(e);\n          }\n        }));\n      }\n    }]);\n\n    return IKUpload;\n  }(ImageKitComponent);\n\n  IKUpload.propTypes = PROP_TYPES;\n  IKUpload.defaultProps = {\n    useUniqueFileName: true,\n    isPrivateFile: false,\n    customCoordinates: \"\",\n    tags: [],\n    folder: \"/\",\n    responseFields: []\n  };\n\n  exports.IKContext = IKContext;\n  exports.IKCore = ImageKit;\n  exports.IKImage = IKImage;\n  exports.IKUpload = IKUpload;\n  exports.IKVideo = IKVideo;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}